<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class FmgApi - RDoc Documentation</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add_adom">#add_adom</a>
    
    <li ><a href="#method-i-add_device">#add_device</a>
    
    <li ><a href="#method-i-add_group">#add_group</a>
    
    <li ><a href="#method-i-add_policy_package">#add_policy_package</a>
    
    <li ><a href="#method-i-assign_global_policy">#assign_global_policy</a>
    
    <li ><a href="#method-i-create_script">#create_script</a>
    
    <li ><a href="#method-i-delete_adom">#delete_adom</a>
    
    <li ><a href="#method-i-delete_config_rev">#delete_config_rev</a>
    
    <li ><a href="#method-i-delete_device">#delete_device</a>
    
    <li ><a href="#method-i-delete_group">#delete_group</a>
    
    <li ><a href="#method-i-delete_script">#delete_script</a>
    
    <li ><a href="#method-i-edit_adom">#edit_adom</a>
    
    <li ><a href="#method-i-edit_group_membership">#edit_group_membership</a>
    
    <li ><a href="#method-i-edit_policy_package">#edit_policy_package</a>
    
    <li ><a href="#method-i-get_adom_by_name">#get_adom_by_name</a>
    
    <li ><a href="#method-i-get_adom_by_oid">#get_adom_by_oid</a>
    
    <li ><a href="#method-i-get_adom_list">#get_adom_list</a>
    
    <li ><a href="#method-i-get_config">#get_config</a>
    
    <li ><a href="#method-i-get_config_revision_history">#get_config_revision_history</a>
    
    <li ><a href="#method-i-get_device">#get_device</a>
    
    <li ><a href="#method-i-get_device_license_list">#get_device_license_list</a>
    
    <li ><a href="#method-i-get_device_list">#get_device_list</a>
    
    <li ><a href="#method-i-get_device_vdom_list">#get_device_vdom_list</a>
    
    <li ><a href="#method-i-get_faz_archive">#get_faz_archive</a>
    
    <li ><a href="#method-i-get_faz_config">#get_faz_config</a>
    
    <li ><a href="#method-i-get_faz_generated_report">#get_faz_generated_report</a>
    
    <li ><a href="#method-i-get_fmg_config">#get_fmg_config</a>
    
    <li ><a href="#method-i-get_group">#get_group</a>
    
    <li ><a href="#method-i-get_group_list">#get_group_list</a>
    
    <li ><a href="#method-i-get_instlog">#get_instlog</a>
    
    <li ><a href="#method-i-get_package_list">#get_package_list</a>
    
    <li ><a href="#method-i-get_script">#get_script</a>
    
    <li ><a href="#method-i-get_script_log">#get_script_log</a>
    
    <li ><a href="#method-i-get_script_log_summary">#get_script_log_summary</a>
    
    <li ><a href="#method-i-get_system_status">#get_system_status</a>
    
    <li ><a href="#method-i-get_task_detail">#get_task_detail</a>
    
    <li ><a href="#method-i-import_policy">#import_policy</a>
    
    <li ><a href="#method-i-install_config">#install_config</a>
    
    <li ><a href="#method-i-list_faz_generated_reports">#list_faz_generated_reports</a>
    
    <li ><a href="#method-i-list_revision_id">#list_revision_id</a>
    
    <li ><a href="#method-i-remove_faz_archive">#remove_faz_archive</a>
    
    <li ><a href="#method-i-retrieve_config">#retrieve_config</a>
    
    <li ><a href="#method-i-revert_config">#revert_config</a>
    
    <li ><a href="#method-i-run_faz_report">#run_faz_report</a>
    
    <li ><a href="#method-i-run_script">#run_script</a>
    
    <li ><a href="#method-i-search_faz_log">#search_faz_log</a>
    
    <li ><a href="#method-i-set_faz_config">#set_faz_config</a>
    
    <li ><a href="#method-i-set_fmg_config">#set_fmg_config</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-FmgApi">
  <h1 id="class-FmgApi" class="class">
    class FmgApi
  </h1>

  <section class="description">
    <dl class="rdoc-list note-list"><dt>Version
<dd>
<p>0.9</p>
</dd><dt>Tested with
<dd>
<p>FMG/FAZ 5.0.7</p>
</dd><dt>Tested with
<dd>
<p>Ruby 1.9.3 and Ruby 2.0.0</p>
</dd><dt>Author
<dd>
<p>Nick Petersen (2014)</p>
</dd><dt>License
<dd>
<p>Distributes under the same terms as Ruby</p>
</dd><dt>Summary
<dd>
<p>Provides simplified interaction with the Fortinet
FortiManager/FortiAnalyzer XML API.  Class methods are implemented to
abstract the complexity in executing FMG XML API queries.</p>

<p>Uses Savon Gem for SOAP query/response handling.  Most Savon initialization
parameters are pre-set with values that are known to work with FortiManager
and FortiAnalyzer.</p>

<p><code>Usage:</code></p>

<pre>fmg1 = FmgApi.new('wsdl_file_location', 'url', 'namespace', 'userid', 'passwd')
result = fmg1.get_adom_list</pre>

<p>WSDL file should be locally accessible by the class Namespace for FMG/FAZ
to this point has been:  <a
href="http://r200806.ws.fmg.fortinet.com">r200806.ws.fmg.fortinet.com</a>/
URL generally is <a href="https://<fmg/faz_ip>:8080â€œ><fmg/faz_ip>:8080</a> 
(web service should be enabled on FMG/FAZ)</p>

<p><code>Important:</code> Arguments to fmgapi methods are passed in as hash
key =&gt; value instead of traditional arguments passed in order.   This is
because many methods have several optional arguments and in some cases
required arguments can be left out if other required arguments are used.</p>

<p>When specifying hash key/values arguments to a method, use the following
syntax:</p>

<p>Single argument passed:</p>

<pre class="ruby"><span class="ruby-identifier">method_name</span>(<span class="ruby-identifier">argument_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'argument_value'</span>)
</pre>

<p>Multiple arguments passed:</p>

<pre class="ruby"><span class="ruby-identifier">method_name</span>({<span class="ruby-identifier">argument1_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'argument1_value'</span>, <span class="ruby-identifier">argument2_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'agrument2_value'</span>})
</pre>
</dd></dl>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(wsdl, endpoint, namespace, userid, passwd)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">wsdl</span>, <span class="ruby-identifier">endpoint</span>, <span class="ruby-identifier">namespace</span>, <span class="ruby-identifier">userid</span>, <span class="ruby-identifier">passwd</span>)
  <span class="ruby-ivar">@wsdl</span> = <span class="ruby-identifier">wsdl</span>
  <span class="ruby-ivar">@endpoint</span> = <span class="ruby-identifier">endpoint</span>
  <span class="ruby-ivar">@namespace</span> = <span class="ruby-identifier">namespace</span>
  <span class="ruby-ivar">@userid</span> = <span class="ruby-identifier">userid</span>
  <span class="ruby-ivar">@passwd</span> = <span class="ruby-identifier">passwd</span>

  <span class="ruby-comment">#create a savon client for the service</span>
  <span class="ruby-ivar">@client</span> = <span class="ruby-constant">Savon</span>.<span class="ruby-identifier">client</span>(
      <span class="ruby-identifier">wsdl</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@wsdl</span>,
      <span class="ruby-identifier">endpoint</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@endpoint</span>,   <span class="ruby-comment">#used if you don't have wsdl  (or possibly if only have local wsdl file?)</span>
      <span class="ruby-identifier">namespace</span><span class="ruby-operator">:</span> <span class="ruby-ivar">@namespace</span>,   <span class="ruby-comment">#used if you don't have wsdl</span>
      <span class="ruby-comment">##</span>
      <span class="ruby-comment">############ SSL Attributes ##########</span>
      <span class="ruby-identifier">ssl_verify_mode</span><span class="ruby-operator">:</span> <span class="ruby-value">:none</span>,        <span class="ruby-comment"># verify or not SSL Certificate</span>
      <span class="ruby-comment"># ssl_version: :SSLv3,          # or one of [:TLSv1, :SSLv2]</span>
      <span class="ruby-comment"># ssl_cert_file:  &quot;path/client_cert.pem&quot;,</span>
      <span class="ruby-comment"># ssl_cert_key_file: &quot;path/client_key.pem&quot;,</span>
      <span class="ruby-comment"># ssl_cert_key_file:  &quot;path/ca_cert.pem&quot;,        #CA certificate file to use</span>
      <span class="ruby-comment"># ssl_cert_key_password: &quot;secret&quot;,</span>
      <span class="ruby-comment">##</span>
      <span class="ruby-comment">############ SOAP Protocol Attributes</span>
      <span class="ruby-comment">##</span>
      <span class="ruby-comment"># soap_header: { &quot;token&quot; =&gt; &quot;secret&quot; }, #if you need to add customer XML to the SOAP header.  useful for auth token?</span>
      <span class="ruby-comment"># soap_version: 2,       #defaults to SOAP 1.1</span>
      <span class="ruby-comment">##</span>
      <span class="ruby-comment">############ MISC Attributes</span>
      <span class="ruby-comment">##</span>
      <span class="ruby-identifier">pretty_print_xml</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,        <span class="ruby-comment"># print the request and response XML in logs in pretty</span>
  <span class="ruby-comment"># headers: {&quot;Authentication&quot; =&gt; &quot;secret&quot;, &quot;etc&quot; =&gt; &quot;etc&quot;},</span>
   <span class="ruby-comment">#open_timeout: 5,           # in seconds</span>
   <span class="ruby-comment">#read_timeout: 5,           # in seconds</span>
  <span class="ruby-comment">##</span>
  <span class="ruby-comment">########## LOGGING Attributes ##############</span>
  <span class="ruby-comment">##</span>
  <span class="ruby-comment"># log: false,</span>
  <span class="ruby-comment"># logger: rails.logger,  #by default will log to $stdout (ruby's default logger)</span>
  <span class="ruby-comment"># log_level: :info,  #one of [:debug, :info, :warn, :error, :fatal]</span>
  <span class="ruby-comment"># filters: [:password],  #sensitive info can be filtered from logs.  specifies which arguments to filter from logs</span>
  <span class="ruby-comment">##</span>
  <span class="ruby-comment">########### RESPONSE Attributes ##############</span>
  <span class="ruby-comment">##</span>
  <span class="ruby-comment"># strip_namespace: false    # default is to strip namespace identifiers from the response</span>
  <span class="ruby-comment"># convert_response_tags_to: upcase  # value is name of a proc that takes an action you've created</span>
  )
  <span class="ruby-ivar">@authmsg</span> = {<span class="ruby-value">:servicePass</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:userID</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@userid</span>, <span class="ruby-value">:password</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@passwd</span>}}
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_adom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_adom</span><span
            class="method-args">(opts = {}, devices=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-add_adom">#add_adom</a> Returns Hash (with
FMG error_code and error_msg, when successful) or Error (if not successful)</p>

<p>Adds an ADOM to FortiManager or FortiAnalyzer.</p>

<p>Takes up to 2 arguments of types 1=hash, 2=(hash or array of hashes or
false)</p>

<p><code>Argument_1:</code> is of type Hash with following required (R) and
optional (O)</p>

<pre>(R) :name               # Name of ADOM to edit
(O) :is_backup_mode     # 0=no, 1=yes, default=no
(O) :version            # Version to set   (example: '500')
(O) :mr                 # Major Release Version to set   (example '0')</pre>

<p><code>Argument_2:</code> is optional and is of type Hash (for single device
entry) or type Array of Hashes (for multiple device entries) Specifies
devices/vdoms to add to this ADOM.  If you need to pass the 3rd argument
for meta data but not pass any devices then you should just put false in
the place of this argument. Hash or Hashes must be specified with one of
the following parameter combinations:</p>

<pre class="ruby">{:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-num'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-name'</span>}
{:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-num'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-id'</span>}
{:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-name'</span>}
{:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-id'</span>}
</pre>

<p><code>Example1:</code> (add a new ADOM)</p>

<pre class="ruby"><span class="ruby-identifier">add_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>})
</pre>

<p><code>Example2:</code> (add ADOM and assign single VDOM to the new ADOM)</p>

<pre class="ruby"><span class="ruby-identifier">add_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomA'</span>})
</pre>

<p><code>Example3:</code> (add new ADOM and assign multiple VDOMs to the ADOM)</p>

<pre class="ruby"><span class="ruby-identifier">newdevices</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomA'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">1</span>] = {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomB'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">2</span>] = {:<span class="ruby-identifier">serial_number</span><span class="ruby-string">' =&gt; '</span><span class="ruby-constant">FGVM22222222</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomC'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">3</span>] = {:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomD'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">4</span>] = {:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'2178'</span>}
<span class="ruby-identifier">add_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, <span class="ruby-identifier">newdevices</span>)
</pre>
          
          

          
          <div class="method-source-code" id="add_adom-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_adom</span>(<span class="ruby-identifier">opts</span> = {}, <span class="ruby-identifier">devices</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:is_backup_mode</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_backup_mode</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_backup_mode</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>
  <span class="ruby-comment">#querymsg[:VPN_management] = opts[:vpn_management] ? opts[:vpn_management] : '0'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment">## If the optional :mr argument is passed, for safety we require that :version is also passed.  If neither is set</span>
    <span class="ruby-comment">## we will default it as it is required parameter.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:version</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:mr</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'If you specify :version you must also specify :mr'</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'If you specify :mr you must also specify :version'</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:version</span>] = <span class="ruby-string">'500'</span>
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:mr</span>] = <span class="ruby-string">'0'</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Check if the target devices was passed in.  If so add the target devices tags to the query.s</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-comment">## If multiple devices are passed in through the array then we may have duplicate tags that need to be added</span>
      <span class="ruby-comment">## to the query.  Hashes cannont handle duplicate tags (aka keys) so we must convert to a string of xml and add</span>
      <span class="ruby-comment">## the parameters to the string as xml attributes instead.</span>
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>)
      <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> (<span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>]) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">x</span>[<span class="ruby-value">:vdom_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:vdom_id</span>])
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;deviceSNVdom&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;deviceIDVdom&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]

          <span class="ruby-comment"># The FMG API +sometimes+ capitalizes not just the letters between words (addDeviceIdVdom) but instead requires</span>
          <span class="ruby-comment"># in +some+ instanaces that two or more letters sequentially be capitalized (addDeviceIDVDom).  Normal camel case</span>
          <span class="ruby-comment"># processing usually takes care of this for us in instances where just first letter after an _ should be capital</span>
          <span class="ruby-comment"># but we don't want to force capitalizing only one or two letters in any otherwise lowercase :symbol so we adjust</span>
          <span class="ruby-comment"># the casing here using gsub</span>
          <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/deviceIdVdom/</span>, <span class="ruby-string">'deviceIDVdom'</span>)
          <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/deviceSnVdom/</span>, <span class="ruby-string">'deviceSNVdom'</span>)
          <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/serialNumber/</span>, <span class="ruby-string">'SN'</span>)
          <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/devId/</span>, <span class="ruby-string">'ID'</span>)
          <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/vdomId/</span>, <span class="ruby-string">'vdomID'</span>)

          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/deviceSNVdom&gt;'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/deviceIDVdom&gt;'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments within the \&quot;devices\&quot; Array/Hash argument-&gt; the 2nd argument (for devices to add) must contain (:serial_number or :dev_id) AND (:vdom_name or :vdom_id'</span>)
        <span class="ruby-keyword">end</span>
      }
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>] = {}
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>][<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>] = {}
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN_vdom</span>][<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>] = {}
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>][<span class="ruby-value">:iD</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>][<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>] = {}
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD_vdom</span>][<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; the 2nd argument (for devices to add) to add must contain :serial_number &amp; (:vdom_name or :vdom_id'</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">querymsgxml</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_adom</span>,<span class="ruby-identifier">querymsgxml</span>,<span class="ruby-value">:add_adom_response</span>,<span class="ruby-value">:error_msg</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_adom</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:add_adom_response</span>,<span class="ruby-value">:error_msg</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_device" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_device</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-add_device">#add_device</a> Returns String
(string contains taskID of addDevice task, you can lookup the task to get
results) NOTE: may take several minutes for the fmg to import the device</p>

<p>Causes FortiManager/FortiAnalyzer to communicate with specified Fortinet
device (specified by IP) to import as a managed device into the FMG/FAZ. 
This has only been tested for adding FortiGate devices.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">add_device</span>({:<span class="ruby-identifier">ip</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'x.x.x.x'</span>, :<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name-to-give'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:adom         # defaults to root if not provided
:admin_user   # defaults to admin if not provided
:password     # defaults to '' if not provided
:description  # not set if not provided</pre>
          
          

          
          <div class="method-source-code" id="add_device-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 241</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_device</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:admin_user</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:admin_user</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:admin_user</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'admin'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:password</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:password</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:password</span>] <span class="ruby-operator">:</span> <span class="ruby-string">''</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:description</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:ip</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:ip</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:ip</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :ip and :name'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_device</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:add_device_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_group</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-add_group">#add_group</a> Returns Hash with
API error hash (if successful) or returns Object Type Error likely a
RunTimeError (if not successful)  Hash returned if successful includes keys
error_code and error_message.</p>

<p>Adds a new group to FMG/FAZ.  Optionally can add one device to that new
group as well.  If more than one devices needs to be added to the group or
you need to add the devices later, use the <a
href="FmgApi.html#method-i-edit_group_membership">#edit_group_membership</a>
method.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">add_group</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'new-group-name'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:adom         # defaults to root if not provided
:description  # not set if not provided
:device_sn    # serial number of a single device to add to this new group (pass :device_sn or :device_id or neither)
:device_id    # device id of single device to add to this new group (pass :device_sn or :device_id or neither)
# Note: multiple groups can contain the same device(s)</pre>
          
          

          
          <div class="method-source-code" id="add_group-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 283</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_group</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:description</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>]
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:group_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:group_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:group_name</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_sn</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_sN</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_sn</span>]
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_id</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_iD</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_id</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
     <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :group_name'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_group</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:add_group_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_policy_package" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_policy_package</span><span
            class="method-args">(opts = {}, install_targets=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-add_policy_package">#add_policy_package</a>
Returns NoriStringWithAttributes (string contains OID of package that
operation was successfully completed on)</p>

<p>Multiple operations possible.  Create new FMG policy package, including
adding installation targets. Also may clone an existing policy package,
rename an existing policy package or add installation targets to an
existing policy package.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'new-pkg-name'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'new-pkf-name'</span>}, <span class="ruby-operator">*</span><span class="ruby-constant">ArrayOfHashes</span>)
 <span class="ruby-constant">Optional</span> <span class="ruby-operator">*</span><span class="ruby-constant">ArrayOfHashes</span> <span class="ruby-value">2</span><span class="ruby-identifier">nd</span> <span class="ruby-identifier">argument</span> <span class="ruby-identifier">contains</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">target</span> <span class="ruby-identifier">definitions</span>.  <span class="ruby-constant">See</span> <span class="ruby-constant">Optional_Arguments</span>(<span class="ruby-constant">ARG2</span><span class="ruby-operator">-</span><span class="ruby-constant">ArrayOfHashes</span>) <span class="ruby-identifier">below</span><span class="ruby-operator">:</span>
</pre>

<p>Optional_Arguments(ARG1-Hash):</p>

<pre>:adom                  # defaults to root if not passed
:is_global             # 0=create local package, 1=create global package.  defaults to 0.  If set to 1, ignores the :adom setting and assigns in global ADOM
:fg_is_not_vdom_mode  # 0=all fortigates referenced are in vdom mode, 1 = one or more of FGs is not in vdom mode
                      # default is 0.  This is a protection mechanism in this method to &quot;help&quot; prevent adding a &quot;device&quot; to a policy package
                      # instead of a vdom to a policy package as the FMG will let you do this.   In order to add a &quot;device&quot; to an install
                      # target instead of a vdom to an install target you must set this to 1.  However, if you do set this to one, if you
                      # are adding multiple devices in this single call then it will not prevent adding &quot;devices&quot; vs. &quot;vdoms&quot; to policy package
                      # for any of the devices referenced in this call. Even if the some fgs are in vdom mode.
:rename                # rename :policy_package_name to :rename  (not set if not passed)
:clone_from            # when creating a new :policy_package_name you can clone from an existing (in same ADOM) with name specified in :clone_from</pre>

<p>Optional_Arguments(ARG2-ArrayOfHashes)  (This may be a single hash for one
install target or array of hashes for multiple)</p>

<p>Example-1:  (adding multiple vdoms via ArrayOfHashes to package install
targets)</p>

<pre class="ruby"><span class="ruby-identifier">myinstalltargets</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">myinstalltargets</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>}}}
<span class="ruby-identifier">myinstalltargets</span>[<span class="ruby-value">1</span>] = {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'transparent'</span>}}
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, <span class="ruby-identifier">myinstalltargets</span>})
</pre>

<p>Example-2:  (adding single vdom via Hash to package install targets)</p>

<pre class="ruby"><span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span>{:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>}}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span>{:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'3'</span>}}} <span class="ruby-constant">OR</span>
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'123'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>}}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'123'</span>, :<span class="ruby-identifier">vdom</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'3'</span>}})
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>, :<span class="ruby-identifier">fg_is_not_vdom_mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1'</span>}), {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>})
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>, :<span class="ruby-identifier">fg_is_not_vdom_mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1'</span>}), {:<span class="ruby-identifier">dev</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'123'</span>})
</pre>

<p>Example-3: (adding a group to package install targets)</p>

<pre class="ruby"><span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">grp</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'grp-name'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">add_policy_package</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'pkg-name'</span>}, {:<span class="ruby-identifier">grp</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'grp-oid'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="add_policy_package-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_policy_package</span>(<span class="ruby-identifier">opts</span> = {}, <span class="ruby-identifier">install_targets</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:is_global</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'1'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:clone_from</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:clone_from</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:clone_from</span>]
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rename</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rename</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rename</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:policy_package_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:policy_package_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:policy_package_name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :policy_package_name'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># Because we need multiple attributes of same name contained in query message to specify more than one target we</span>
    <span class="ruby-comment"># cannot using hash as container to pass to Savon.  We instead must convert existing hash to xml string and append</span>
    <span class="ruby-comment"># the repetitious attributes.  Hash to XML translation is done with Gyoku.xml() method.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_targets</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;packageInstallTarget&gt;'</span>
      <span class="ruby-identifier">install_targets</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:grp</span>]
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:grp</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:grp</span>][<span class="ruby-value">:name</span>]
            <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>)
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Install target was passed with hash key :grp but did not contain one of sub keys :oid or :name'</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>]
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:name</span>]
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>]
              <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>][<span class="ruby-value">:name</span>]
                <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Install target was passed with hash key :dev and sub key :vdom but :vdom did not contain one of subkeys :oid or :name'</span>)
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:fg_is_not_vdom_mode</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'1'</span>
              <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>)
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'One or more targets is a device and not a vdom while :fg_is_not_vdom_mode was not set to 1'</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'At least one of targets were passed with top key :dev but did not have one of required sub-keys :oid, :name or :vdom'</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Install target was passed but at least one of target hashes did not have one of top-level keys, either :grp or :dev'</span>)
        <span class="ruby-keyword">end</span>
      }
      <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/packageInstallTarget&gt;'</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">install_targets</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;packageInstallTarget&gt;'</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:grp</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:grp</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:grp</span>][<span class="ruby-value">:name</span>]
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">install_targets</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Install target was passed with hash key :grp but did not contain one of sub keys :oid or :name'</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/packageInstallTarget&gt;'</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>]
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>]
            <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>][<span class="ruby-value">:oid</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">install_targets</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>][<span class="ruby-value">:name</span>]
              <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Install target was passed with hash key :dev and sub key :vdom but :vdom did not contain one of subkeys :oid or :name'</span>)
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">install_targets</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">else</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev</span>][<span class="ruby-value">:vdom</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:fg_is_not_vdom_mode</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'1'</span>
              <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">install_targets</span>)
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'One or more targets is a device and not a vdom while :fg_is_not_vdom_mode was not set to 1'</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'At least one of targets were passed with top key :dev but did not have one of required sub-keys :oid, :name or :vdom'</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">querymsgxml</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_policy_package</span>,<span class="ruby-identifier">querymsgxml</span>,<span class="ruby-value">:add_policy_package_response</span>,<span class="ruby-value">:policy_package_oid</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:add_policy_package</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:add_policy_package_response</span>,<span class="ruby-value">:policy_package_oid</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FmgApi.html#method-i-edit_policy_package">edit_policy_package</a>
        </div>
        

        
      </div>

    
      <div id="method-i-assign_global_policy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assign_global_policy</span><span
            class="method-args">(opts = {}, targets=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-assign_global_policy">#assign_global_policy</a>
Returns Nori::StringWithAttributes (string contains task ID of process)</p>

<p>Assigns a global policy package to ADOMs or specific packages inside of
ADOM.  (Note: specific package assignment does not seem to be working as of
5.0.7.  Additionally, Assignment doesnâ€™t show up under the global package
assignments tab even when successful, although you will see the global
rules in the target packages themselves.)</p>

<p><code>Usage:</code></p>

<pre>assign_global_policy({}:policy_package_name}, *hash-or-array-of-hashses)</pre>

<p>:policy_package_name is name of global policy package to assign
*hash-or-array-of-hashes defines the target ADOM and packages and contains
the following parameter syntax per hash {:name =&gt; â€˜target-adom-nameâ€™,
pkg =&gt; {:oid =&gt; â€˜oid-of-target-packages-in-adomâ€™}}</p>

<p><code>Optional-Arguments:</code></p>

<pre>:all_objects  # Add all global package objects to local policy regardless of use in policy? 0=no, 1=yes, default=no
:install_to_device # Install to device after package assignment: 0=no, 1=yes, default=no
:check_assignd_dup # Check for duplicate global policy assignments:  0=no, 1=yes, default=no</pre>

<p>Example1: (with single adom/package targets passed as Hash)</p>

<pre class="ruby"><span class="ruby-identifier">assign_global_policy</span>(:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'global-policy-1'</span>}, {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>, :<span class="ruby-identifier">pkg</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'602'</span>}})
</pre>

<p>Example2:(with multiple adom/package targets passed as Array of Hashes)</p>

<pre class="ruby"><span class="ruby-identifier">mytargetpkgs</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">mytargetpkgs</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>, :<span class="ruby-identifier">pkg</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'602'</span>}}
<span class="ruby-identifier">mytargetpkgs</span>[<span class="ruby-value">1</span>] = {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>, :<span class="ruby-identifier">pkg</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'603'</span>}}
<span class="ruby-identifier">mytargetpkgs</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomB'</span>, :<span class="ruby-identifier">pkg</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'703'</span>}}
<span class="ruby-identifier">assign_global_policy</span>({:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'global-policy-1'</span>}, <span class="ruby-identifier">mytargetpkgs</span>)
</pre>

<p>Example3: (with singe adom/package targets passed as hash and optional
arguments)</p>

<pre class="ruby"><span class="ruby-identifier">assign_global_policy</span>(:<span class="ruby-identifier">policy_package_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'global-policy-1'</span>, :<span class="ruby-identifier">all_objects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1'</span>, :<span class="ruby-identifier">install_to_device</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1'</span>}, {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>, :<span class="ruby-identifier">pkg</span> =<span class="ruby-operator">&gt;</span> {:<span class="ruby-identifier">oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'602'</span>}})
</pre>
          
          

          
          <div class="method-source-code" id="assign_global_policy-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">assign_global_policy</span>(<span class="ruby-identifier">opts</span> = {}, <span class="ruby-identifier">targets</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'Global'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:policy_package_name</span>] =  <span class="ruby-identifier">opts</span>[<span class="ruby-value">:policy_package_name</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:policy_package_name</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'default'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:all_objects</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_objects</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:all_objects</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:install_to_device</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:install_to_device</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:install_to_device</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:check_assignd_dup</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:check_assignd_dup</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:check_assignd_dup</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-comment">## If we have more than one target, that will require multiple copies of identical tags which cannot be handled</span>
    <span class="ruby-comment">## when using Hash format for passing parameters to Savon.  So we instead convert to an XML based string first</span>
    <span class="ruby-comment">## then append our multiple entries to the string as XML.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>)
      <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:pkg</span>][<span class="ruby-value">:oid</span>]
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;adomList&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;/adomList&gt;'</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Target(s) array of hashes did not include elements :name and one of (:pkg-&gt;:oid or :pkg-&gt;:name)'</span>)
        <span class="ruby-keyword">end</span>
      }
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">targets</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">targets</span>[<span class="ruby-value">:pkg</span>][<span class="ruby-value">:oid</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_list</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_list</span>][<span class="ruby-value">:name</span>] = <span class="ruby-identifier">targets</span>[<span class="ruby-value">:name</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_list</span>][<span class="ruby-value">:pkg</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_list</span>][<span class="ruby-value">:pkg</span>][<span class="ruby-value">:oid</span>] = <span class="ruby-identifier">targets</span>[<span class="ruby-value">:pkg</span>][<span class="ruby-value">:oid</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Target(s) hash did not include elements :name and one of (:pkg-&gt;:oid or :pkg-&gt;:name)'</span>)
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Target package(s) detail must be passed as a Hash (for single target) or Array of Hashes (for multiple targets'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">querymsgxml</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:assign_global_policy</span>,<span class="ruby-identifier">querymsgxml</span>,<span class="ruby-value">:assign_global_policy_response</span>,<span class="ruby-value">:task_id</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:assign_global_policy</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:assign_global_policy_response</span>,<span class="ruby-value">:task_id</span>)
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_script</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-create_script">#create_script</a> Returns
Nori::StringWithAttributes (string contains 0 for success or 1 for failed)</p>

<p>Creates a new script in the designated ADOM</p>

<p><code>Usage:</code> <a
href="FmgApi.html#method-i-create_script">#create_script</a>({:adom =&gt;
'adom-to-create-in, :name =&gt; 'name-of-script-to-create', :content =&gt;
'content-of-script-to-create'})</p>

<p><code>Optional_Arguments:</code></p>

<pre>:type         # type of script options are CLI or TCL.  default=CLI
:description  # description of script.   default='created via XML API'
:overwrite    # if script name already exists overwrite?  0=no, 1=yes, default=no
:is_global    # create this as a global script. 0=no, 1=yes, default=no.</pre>
          
          

          
          <div class="method-source-code" id="create_script-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 530</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_script</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:is_global</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'CLI'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:description</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:description</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'created via XML API'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:overwrite</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:overwrite</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:overwrite</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:content</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] =  <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:content</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:content</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method -&gt; :adom, :name and :content'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:create_script</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:create_script_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_adom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_adom</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-delete_adom">#delete_adom</a> Returns Hash
(if hash is return object then it was executed successfully)</p>

<p>Deletes specified ADOM</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">delete_adom</span>(:<span class="ruby-identifier">adom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-name'</span>) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_adom</span>(:<span class="ruby-identifier">adom_oid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-oid'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="delete_adom-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 561</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_adom</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>]
    <span class="ruby-keyword">elsif</span>
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_oid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_oid</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :adom_name OR adom_oid'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:delete_adom</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:delete_adom_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_config_rev" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_config_rev</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-delete_config_rev">#delete_config_rev</a>
Returns Hash (if hash is return object then it was executed successfully)</p>

<p>Deletes specified configuration revision <code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">delete_config_rev</span>({:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>, :<span class="ruby-identifier">rev_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'revision-name'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_config_rev</span>({:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>, :<span class="ruby-identifier">rev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'revision-id'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_config_rev</span>({:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">rev_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'revision-name'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_config_rev</span>{{<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">rev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'revision-id'</span>}}
</pre>
          
          

          
          <div class="method-source-code" id="delete_config_rev-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 589</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_config_rev</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :serial_number or :dev_id  (in addition to :rev_name or :rev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :rev_name or :rev_id (in addition to :serial_number or :dev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:delete_config_rev</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:delete_config_rev_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_device" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_device</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-delete_device">#delete_device</a>
Nori::StringWithAttributes (string contains taskID of fmg delete device
process. Must get results from task)</p>

<p>Deletes specified device <code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">delete_device</span>({:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_device</span>({:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="delete_device-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_device</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :serial_number or :dev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:delete_device</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:delete_device_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_group</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-delete_group">#delete_group</a> Returns Hash
(if object type of Hash is returned then executed successfully)</p>

<p>Deletes specified group <code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">delete_group</span>({:<span class="ruby-identifier">grp_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'group-name'</span>, :<span class="ruby-identifier">adom=</span><span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-name'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">delete_group</span>({:<span class="ruby-identifier">grp_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'group-id'</span>, :<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-name'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="delete_group-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 648</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_group</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:grp_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; (:grp_name or :grp_id) and :adom'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:delete_group</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:delete_group_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_script</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-delete_script">#delete_script</a></p>

<p>Deletes specified script</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">delete_script</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name-of-script'</span>})
</pre>

<p><code>Optional_Arugments:</code></p>

<pre>:type  #type of script.  CLI or TCL.  defaults to CLI</pre>
          
          

          
          <div class="method-source-code" id="delete_script-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 679</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_script</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'CLI'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:delete_script</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:delete_script_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-edit_adom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">edit_adom</span><span
            class="method-args">(opts = {}, devices=false, meta=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-edit_adom">#edit_adom</a> Returns Hash (with
FMG error_code and error_msg when successful) or RunTimeError (if not
successful)</p>

<p>Edits specified ADOM.  Provides ability to change:  backup mode, vpn
management, version, devices/adoms, or metadata</p>

<p>Takes up to 3 arguments of types 1=hash, 2=(hash or array of hashes or
false), 3=(hash or array of hashes) <code>Argument_1:</code> is of type
Hash with following required (R) and optional (O)</p>

<pre>(R) :name               # Name of ADOM to edit
(O) :is_backup_mode     # 0=no, 1=yes, default=no
(O) :version            # Version to set   (example: '500')
(O) :mr                 # Major Release Version to set   (example '0')</pre>

<p><code>Argument_2:</code> is optional and is of type Hash (for single device
entry) or type Array of Hashes (for multiple device entries)</p>

<p>Specifies devices/vdoms to add to this ADOM.  If you need to pass the 3rd
argument for meta data but not pass any devices then you should just put
false in the place of this argument. Hash or Hashes must be specified with
one of the following parameter combinations:</p>

<pre class="ruby">{:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-num'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-name'</span>}
{:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-num'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-id'</span>}
{:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-name'</span>}
{:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdom-id'</span>}
</pre>

<p><code>Argument_3:</code> is optional and is of type Hash (for single meta
value entry) or as an Array of Hashes (for multiple meta entries) Specifies
meta data tags to edit on the ADOM. Hash(es) should be of the following
format:</p>

<pre class="ruby">{:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'meta-tag-name'</span>, :<span class="ruby-identifier">value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'meta-tag-value'</span>}
</pre>

<p><code>Example1:</code> (change the backup mode to backup-mode)</p>

<pre class="ruby"><span class="ruby-identifier">edit_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>, :<span class="ruby-identifier">is_backup_mode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'1'</span>}
</pre>

<p><code>Example2:</code> (add a single vdom)</p>

<pre class="ruby"><span class="ruby-identifier">edit_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomA'</span>})
</pre>

<p><code>Example3:</code> (add multiple vdoms)</p>

<pre class="ruby"><span class="ruby-identifier">newdevices</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomA'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">1</span>] = {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomB'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">2</span>] = {:<span class="ruby-identifier">serial_number</span><span class="ruby-string">' =&gt; '</span><span class="ruby-constant">FGVM22222222</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomC'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">3</span>] = {:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomD'</span>}
<span class="ruby-identifier">newdevices</span>[<span class="ruby-value">4</span>] = {:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'2178'</span>}
<span class="ruby-identifier">edit_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, <span class="ruby-identifier">newdevices</span>)
</pre>

<p><code>Example4:</code> (edit meta data but add no vdoms)</p>

<pre class="ruby"><span class="ruby-identifier">newmetadata</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">newmetadata</span>[<span class="ruby-value">0</span>] = {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'meta1'</span>, :<span class="ruby-identifier">value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'value1'</span>}
<span class="ruby-identifier">newmetadata</span>[<span class="ruby-value">1</span>] = {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'meta2'</span>, :<span class="ruby-identifier">value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'value2'</span>}
<span class="ruby-identifier">edit_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, <span class="ruby-keyword">false</span>, <span class="ruby-identifier">newmetadata</span>)
</pre>

<p><code>Example5:</code> (add single device/vdom and single meta data entry)</p>

<pre class="ruby"><span class="ruby-identifier">edit_adom</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adomA'</span>}, {:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'FGVM11111111'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'vdomA'</span>}, {:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'meta1'</span>, <span class="ruby-identifier">value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'value1'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="edit_adom-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 746</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">edit_adom</span>(<span class="ruby-identifier">opts</span> = {}, <span class="ruby-identifier">devices</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">meta</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:is_backup_mode</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_backup_mode</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_backup_mode</span>]
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:state</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:state</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:state</span>]
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vpn_management</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vpn_management</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vpn_management</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment">## If the optional :mr argument is passed, for safety we require that :version is also passed.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:version</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:mr</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Argument error: provided :mr but not :version'</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:version</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">opts</span>[<span class="ruby-value">:mr</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Argument error: provided :version but not :mr'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Check if the target devices was passed in.  If so add the target devices tags to the query.s</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-comment">## If multiple devices are passed in through the array then we may have duplicate tags that need to be added</span>
      <span class="ruby-comment">## to the query.  Hashes cannont handle duplicate tags (aka keys) so we must convert to a string of xml and add</span>
      <span class="ruby-comment">## the parameters to the string as xml attributes instead.</span>
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>)
      <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>]) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">x</span>[<span class="ruby-value">:vdom_name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:vdom_id</span>])
        <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;addDeviceSNVdom&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
        <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;addDeviceIDVdom&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]

        <span class="ruby-comment"># The FMG API +sometimes+ capitalizes not just the letters between words (addDeviceIdVdom) but instead requires</span>
        <span class="ruby-comment"># in +some+ instanaces that two or more letters sequentially be capitalized (addDeviceIDVDom).  Normal camel case</span>
        <span class="ruby-comment"># processing usually takes care of this for us in instances where just first letter after an _ should be capital</span>
        <span class="ruby-comment"># but we don't want to force capitalizing only one or two letters in any otherwise lowercase :symbol so we adjust</span>
        <span class="ruby-comment"># the casing here using gsub</span>
        <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/addDeviceIdVdom/</span>, <span class="ruby-string">'addDeviceIDVdom'</span>)
        <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/addDeviceSnVdom/</span>, <span class="ruby-string">'addDeviceSNVdom'</span>)
        <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/serialNumber/</span>, <span class="ruby-string">'SN'</span>)
        <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/devId/</span>, <span class="ruby-string">'ID'</span>)
        <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-identifier">querymsgxml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/vdomId/</span>, <span class="ruby-string">'vdomID'</span>)

        <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/addDeviceSNVdom&gt;'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
        <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/addDeviceIDVdom&gt;'</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">x</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments within the \&quot;devices\&quot; Array/Hash argument-&gt; the 2nd argument (for devices to add) must contain (:serial_number or :dev_id) AND (:vdom_name or :vdom_id'</span>)
      <span class="ruby-keyword">end</span>
      }
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>][<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:serial_number</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_vdom</span>][<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>][<span class="ruby-value">:iD</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>][<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_name</span>]
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>] = {}
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>][<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:dev_id</span>]
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_vdom</span>][<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">devices</span>[<span class="ruby-value">:vdom_id</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; the 2nd argument (for devices to add) to add must contain :serial_number &amp; (:vdom_name or :vdom_id'</span>)
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">querymsgxml</span> = <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">querymsg</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;metafields&gt;'</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">querymsgxml</span>
      <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:name</span>]  <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">x</span>[<span class="ruby-value">:value</span>]
          <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;metafield&gt;'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Gyoku</span>.<span class="ruby-identifier">xml</span>(<span class="ruby-identifier">x</span>) <span class="ruby-operator">+</span> <span class="ruby-string">'&lt;/metafield&gt;'</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments in \&quot;metadata\&quot; Hash/Array-&gt; :name and :value'</span>)
        <span class="ruby-keyword">end</span>
      }
      <span class="ruby-identifier">querymsgxml</span> <span class="ruby-operator">+=</span> <span class="ruby-string">'&lt;/metafields&gt;'</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">meta</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">meta</span>[<span class="ruby-value">:value</span>]
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:metafields</span>] = {<span class="ruby-value">:metafield</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">meta</span>[<span class="ruby-value">:name</span>], <span class="ruby-value">:value</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">meta</span>[<span class="ruby-value">:value</span>]}}
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments in \&quot;meta data\&quot; Hash/Array-&gt; :name and :value'</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">devices</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:edit_adom</span>,<span class="ruby-identifier">querymsgxml</span>,<span class="ruby-value">:edit_adom_response</span>,<span class="ruby-value">:error_msg</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:edit_adom</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:edit_adom_response</span>,<span class="ruby-value">:error_msg</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-edit_group_membership" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">edit_group_membership</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-edit_group_membership">#edit_group_membership</a>
Returns</p>

<p>Retrieves ADOM info for a specified ADOM name and returns a hash of 
attributes</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_adom_by_name</span>() <span class="ruby-constant">OR</span>  <span class="ruby-comment"># Note: If no parameter is passed defaults to 'root'</span>
<span class="ruby-identifier">get_adom_by_name</span>(:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="edit_group_membership-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 857</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">edit_group_membership</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_name</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:grp_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt;  :grp_name or :grp_id'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_sn_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_id_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_sn_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_id_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_name_list</span>] <span class="ruby-operator">||</span>         <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_id_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_name_list</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_id_list</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'No changes to make were provided'</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_sN_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_sn_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_sn_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_device_iD_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_id_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_device_id_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:del_device_sN_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_sn_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_sn_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:del_device_iD_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_id_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_device_id_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_group_name_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_name_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_name_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:add_group_iD_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_iD_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:add_group_iD_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:del_group_name_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_name_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_name_list</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:del_group_iD_list</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_iD_list</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:del_group_iD_list</span>]

    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:edit_group_membership</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:edit_group_membership_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-edit_policy_package" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">edit_policy_package</span><span
            class="method-args">(opts = {}, install_targets=false)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FmgApi.html#method-i-add_policy_package">add_policy_package</a>
        </div>
        
      </div>

    
      <div id="method-i-get_adom_by_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_adom_by_name</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_adom_by_name">#get_adom_by_name</a>
Returns Hash</p>

<p>Retrieves ADOM info for a specified ADOM name and returns a hash of 
attributes</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_adom_by_name</span>() <span class="ruby-constant">OR</span>  <span class="ruby-comment"># Note: If no parameter is passed defaults to 'root'</span>
<span class="ruby-identifier">get_adom_by_name</span>(:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_adom_by_name-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 900</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_adom_by_name</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:names</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_adoms</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_adoms_response</span>,<span class="ruby-value">:adom_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_adom_by_oid" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_adom_by_oid</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_adom_by_oid">#get_adom_by_oid</a> Returns
Hash</p>

<p>Retrieves VDOM info for a specified VDOM ID and returns a hash of VDOM
attributes</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_adom_by_oid</span>() <span class="ruby-constant">OR</span>  <span class="ruby-comment"># If no parameter is passed, defaults to OID=3 (which should be root adom)]</span>
<span class="ruby-identifier">get_adom_by_oid</span>(:<span class="ruby-identifier">adom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_oid'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_adom_by_oid-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 921</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_adom_by_oid</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_ids</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'3'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_adoms</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_adoms_response</span>,<span class="ruby-value">:adom_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_adom_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_adom_list</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_adom_list">#get_adom_list</a> Returns
Array of Hashes (unless not in ADOM mode then just single Hash)</p>

<p>Retrieves ADOM details as hash of hashes with top key based on OID</p>

<p><code>Usage:</code></p>

<pre>get_adom_list()</pre>
          
          

          
          <div class="method-source-code" id="get_adom_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 941</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_adom_list</span>
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_adom_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_adom_list_response</span>,<span class="ruby-value">:adom_info</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_config</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_config">#get_config</a> Returns Hash</p>

<p>Retrieves a specific configuration revision</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_config</span>({:<span class="ruby-identifier">revision_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'rev-number'</span>, :<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_config</span>({:<span class="ruby-identifier">revision_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'rev-number'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:adom   # ADOM name.  Defaults to root if not supplied</pre>
          
          

          
          <div class="method-source-code" id="get_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 964</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_config</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:revision_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:revision_number</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:revision_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:revision_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide arguments for method get_config-&gt; :revision_number AND (:dev_name OR :dev_id)'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_config_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_config_revision_history" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_config_revision_history</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-get_config_revision_history">#get_config_revision_history</a>
Returns Hash or Array of Hashes (if multiple results are found then returns
Array of Hashes)</p>

<p>Retrieves list of configurations from Revision History</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_config_revision_history</span>(:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>)  <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_config_revision_history</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id)
</span></pre>

<p><code>Optional_Arguments:</code></p>

<pre>:checkin_user
:min_checkin_date
:max_checkin_date,  # if min and max are both passed and max occurs before min then no date filter will be used
:min_revision_number
:max_revision_number  # if min and max are both passed and min &gt; max then no revision number filter will be used</pre>
          
          

          
          <div class="method-source-code" id="get_config_revision_history-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1002</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_config_revision_history</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:checkin_user</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:checkin_user</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:checkin_user</span>]


  <span class="ruby-comment">### Validate Min/Max checkin dates to verify they are properly formated for use by FMG and verify that if both</span>
  <span class="ruby-comment">### min and max checkin dates have been provided that the min date comes before the max.  If not, execute without</span>
  <span class="ruby-comment">### using checkin date filters.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_checkin_date</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_checkin_date</span>]
    <span class="ruby-identifier">date_min_checkin</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_checkin_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">date_max_checkin</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_checkin_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">date_max_checkin</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">date_min_checkin</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">date_max_checkin</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">date_min_checkin</span>
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:min_checkin_date</span>] = <span class="ruby-identifier">date_min_checkin</span>
        <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_checkin_date</span>] = <span class="ruby-identifier">date_max_checkin</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">__method__</span>.<span class="ruby-identifier">to_s</span>  <span class="ruby-operator">+</span> <span class="ruby-string">': :max_checkin_date provided comes before the :min_checkin_date provided, executing without min/max checkin-date filter'</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-identifier">__method__</span>.<span class="ruby-identifier">to_s</span>  <span class="ruby-operator">+</span> <span class="ruby-string">': Invalid date formats provided in attributes :max_checkin_date or :min_checkin_date, executing without min/max checkin-date filter'</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_checkin_date</span>]
    <span class="ruby-identifier">date_min_checkin</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_checkin_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:min_checkin_date</span>] = <span class="ruby-identifier">date_min_checkin</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">date_min_checkin</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_checkin_date</span>]
    <span class="ruby-identifier">date_max_checkin</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_checkin_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_checkin_date</span>] = <span class="ruby-identifier">date_max_checkin</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">date_max_checkin</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">### Validate that if min and max revision numbers are both passed that min is less than max or don't use revision</span>
  <span class="ruby-comment">### number filtering in the search.</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_revision_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_revision_number</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_revision_number</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_revision_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:min_revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_revision_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_revision_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">puts</span> <span class="ruby-identifier">__method__</span>.<span class="ruby-identifier">to_s</span>  <span class="ruby-operator">+</span> <span class="ruby-string">':max_revision_number provided is less than :min_revision_number provided.  Executing without min/max revision number filter'</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_revision_number</span>] <span class="ruby-keyword">then</span> <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:min_revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:min_revision_number</span>]
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_revision_number</span>] <span class="ruby-keyword">then</span> <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_revision_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_revision_number</span>]
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">## Apply the rest of the filters and execute API call by calling exec_soap_query</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide arguments for method get_config_revision_history-&gt; :serial_number OR :dev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_config_revision_history</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_config_revision_history_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_device" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_device</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_device">#get_device</a> Returns Hash</p>

<p>Retrieves a list of vdoms or with arguments a vdom for a specific device id
or device name.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_device</span>(:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>)  <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_device</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_device-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1069</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_device</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_numbers</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_ids</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide arguments for method get_device_vdom_list-&gt;  :serial_number or :dev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_devices</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_devices_response</span>,<span class="ruby-value">:device_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_device_license_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_device_license_list</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-get_device_license_list">#get_device_license_list</a>
Returns Hash or Array of Hashes (if multiple results are found then returns
Array of Hashes)</p>

<p>Retrieves license info for managed devices</p>

<p><code>Usage:</code></p>

<pre>get_device_license_list()</pre>
          
          

          
          <div class="method-source-code" id="get_device_license_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1097</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_device_license_list</span>
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_device_license_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_device_license_list_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_device_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_device_list</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_device_list">#get_device_list</a> Returns
Hash or Array of Hashes (if multiple results are found then returns Array
of Hashes)</p>

<p>Retrieves a list of managed devices from FMG, returns hash, or hash of
hashes with primary key or on serial_number.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_device_list</span>() <span class="ruby-constant">OR</span>  <span class="ruby-comment">#if no arguments are passed defaults to root ADOM</span>
<span class="ruby-identifier">get_device_list</span>(:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-name'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_device_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_device_list</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:detail</span>] = <span class="ruby-value">1</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_device_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_device_list_response</span>,<span class="ruby-value">:device_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_device_vdom_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_device_vdom_list</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-get_device_vdom_list">#get_device_vdom_list</a>
Returns Hash or Array of Hashes (if multiple results are found then returns
Array of Hashes)</p>

<p>Retrieves a list of vdoms or with arguments a vdom for a specific device id
or device name.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_device_vdom_list</span>(:<span class="ruby-identifier">dev_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-name'</span>)  <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_device_vdom_list</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device-id'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_device_vdom_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_device_vdom_list</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_iD</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide arguments for method get_device_vdom_list-&gt;  :dev_name or :dev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_device_vdom_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_device_vdom_list_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_faz_archive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_faz_archive</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_faz_archive">#get_faz_archive</a> Returns
UU64 encoded String</p>

<p>Retrieves specified archive file.  (File name is required and can be
retrieved from associated FAZ log incident serial number)</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_faz_archive</span>({:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom-name'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial-number'</span>, :<span class="ruby-identifier">file_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'filename'</span>, :<span class="ruby-identifier">type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'type'</span>})
</pre>

<p>Please note that in most cases dev_id means dev_id but for this query you
must supply the serial number as the dev_id.</p>

<p>Types are as follows:   1-Web, 2-Email, 3-FTP, 4-IM, 5-Quarantine, 6-IPS</p>

<p>Also note, that although the WSDL claims that this query supports tar and
gzip compression options I have not been able to get either of those to
work.  if you specify tar the file is sent without compression (same as if
you didnâ€™t specify) if you specify gzip it also requires to specify a
password but if you do the query will always hang.</p>
          
          

          
          <div class="method-source-code" id="get_faz_archive-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_faz_archive</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-comment">#querymsg[:compression] = 'gzip'</span>
  <span class="ruby-comment">#querymsg[:zip_password] = 'test'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:file_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:file_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:file_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :adom, :dev_id, :file_name, :type'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_faz_archive</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_faz_archive_response</span>,<span class="ruby-value">:file_list</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_faz_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_faz_config</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_faz_config">#get_faz_config</a> Returns
Nori::StringWithAttributes   (resulting string contains configuration)</p>

<p>Retrieves configuration of FortiAnalyzer or FortiAnalyzer.</p>

<p><code>Note</code> - This class uses the SAVON GEM for SOAP/XML processing. 
There is a bug in SAVON where it removes some of the whitespace charactiers
including n from the body elements of the request upon processing.   This
causes the config file returned in this query to be mal-formatted.  I have
submitted a bug report to the SAVON team via GITHUB.  They have responded
that this will be fixed.  You can see the bug submission at: <a
href="https://github.com/savonrb/savon/issues/574#issuecomment-42635095">github.com/savonrb/savon/issues/574#issuecomment-42635095</a>.
In the mean time, I have added some regex processing code to resolve the
returned query so it is at least usable, however this has only been
limitedly tested on a few configurations.</p>

<p><code>Usage:</code></p>

<pre>get_faz_config()</pre>
          
          

          
          <div class="method-source-code" id="get_faz_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1216</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_faz_config</span>
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_faz_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_faz_config_response</span>,<span class="ruby-value">:config</span>)

    <span class="ruby-comment"># The following code is hopefully temporary.  Returned results from SAVON have much of whitespace especially</span>
    <span class="ruby-comment"># \n removed which causes the returned config to not work on FAZ/FMG if applied.  Please see notes in method</span>
    <span class="ruby-comment"># documentation above.</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\s{2,}/</span>,<span class="ruby-string">&quot;\n&quot;</span>)
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/([0-9a-zA-Z])(end)/</span>, <span class="ruby-string">&quot;\\1 \n\\2\n&quot;</span>)
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/(end)([0-9a-zA-Z])/</span>, <span class="ruby-string">&quot;\\1 \n\\2\n&quot;</span>)
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/([0-9])(config)/</span>, <span class="ruby-string">&quot;\\1\n\\2&quot;</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FmgApi.html#method-i-get_fmg_config">get_fmg_config</a>
        </div>
        

        
      </div>

    
      <div id="method-i-get_faz_generated_report" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_faz_generated_report</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-get_faz_generated_report">#get_faz_generated_report</a>
Returns UU64 encoded String</p>

<pre>**************** Not Working ************************</pre>

<p><code>Usage</code>:</p>

<pre class="ruby"><span class="ruby-identifier">get_faz_generated_report</span>({:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device_id, :file_name =&gt; '</span><span class="ruby-identifier">filename</span><span class="ruby-string">', :type =&gt; '</span><span class="ruby-identifier">type</span><span class="ruby-string">'})
</span></pre>
          
          

          
          <div class="method-source-code" id="get_faz_generated_report-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1245</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_faz_generated_report</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:report_date</span>] = <span class="ruby-string">'2014-04-25T14:36:05+00:00'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:report_name</span>] = <span class="ruby-string">'S-10002_t10002-Bandwidth and Applications Report-2014-04-25-0936'</span>
  <span class="ruby-comment">#querymsg[:report_name] = 'Bandwidth and Applications Report'</span>
  <span class="ruby-comment">#querymsg[:compression] = 'tar'</span>

  <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_faz_generated_report</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_faz_generated_report_response</span>,<span class="ruby-value">:return</span>)

  <span class="ruby-comment">#begin</span>
  <span class="ruby-comment">#  if opts.empty?</span>
  <span class="ruby-comment">#    raise ArgumentError.new('Must provide required arguments for method: :adom, :dev_id, :file_name, :type')</span>
  <span class="ruby-comment">#  else</span>
  <span class="ruby-comment">#    if opts.has_key?(:adom) &amp;&amp; opts.has_key?(:report_date) &amp;&amp; opts.has_key?(:report_name)</span>
  <span class="ruby-comment">#      querymsg.merge!(opts)</span>
  <span class="ruby-comment">#      result = exec_soap_query(:get_faz_generated_report,querymsg,:get_faz_generated_report_response,:return)</span>
  <span class="ruby-comment">#    end</span>
  <span class="ruby-comment">#  end</span>
  <span class="ruby-comment">#rescue Exception =&gt; e</span>
  <span class="ruby-comment">#  fmg_rescue(e)</span>
  <span class="ruby-comment">#  return e</span>
  <span class="ruby-comment">#end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_fmg_config" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">get_fmg_config</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FmgApi.html#method-i-get_faz_config">get_faz_config</a>
        </div>
        
      </div>

    
      <div id="method-i-get_group" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_group</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>get_groups Returns Hash or Array of Hashes (if multiple results are found
then returns Array of Hashes)</p>

<p>Retrieves list of groups from FMG/FAZ.  Must specify either â€˜nameâ€™ of group
or â€˜group_idâ€™.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_group</span>(:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'group_name'</span>)  <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_group</span>(:<span class="ruby-identifier">groupid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'group_id'</span>)
</pre>

<p><code>Optional_Arguments:</code></p>

<pre class="ruby">:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>
</pre>
          
          

          
          <div class="method-source-code" id="get_group-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_group</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:groupid</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:names</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:grp_ids</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_id</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:grp_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name OR :grp_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_groups</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_groups_response</span>,<span class="ruby-value">:group_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_group_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_group_list</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_group_list">#get_group_list</a> Returns
Hash or Array of Hashes (if multiple results are found then returns Array
of Hashes)</p>

<p>Retrieves list of groups from FMG/FAZ.  Optionally can specify an ADOM in
the passed arguments.  If no ADOM is specified then it will default to root
ADOM.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_group_list</span>() <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_group_list</span> (:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_group_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_group_list</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:detail</span>] = <span class="ruby-value">1</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_group_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_group_list_response</span>,<span class="ruby-value">:group_detail</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_instlog" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_instlog</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_instlog">#get_instlog</a> Returns Hash or
Array of Hashes (if multiple results are found then returns Array of
Hashes)</p>

<p>Retrieves installation logs for specified device</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_instlog</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device_id'</span>)  <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_group</span>(:<span class="ruby-identifier">serial_number=</span><span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial_number'</span>)
</pre>

<p><code>Optional_Agruments:</code></p>

<pre>:task_id</pre>
          
          

          
          <div class="method-source-code" id="get_instlog-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1338</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_instlog</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:task_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:task_id</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:task_id</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :dev_id or :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_instlog</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_instlog_response</span>,<span class="ruby-value">:inst_log</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_package_list" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_package_list</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_package_list">#get_package_list</a>
Returns Hash or Array of Hashes (if multiple results are found then returns
Array of Hashes)</p>

<p>Retrieves policy package list.  Option to specify an ADOM or it defaults to
root ADOM.</p>

<p><code>Usage:</code></p>

<pre>get_package_list()</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:adom</pre>
          
          

          
          <div class="method-source-code" id="get_package_list-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1368</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_package_list</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_package_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_package_list_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_script</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_script">#get_script</a> (Returns Hash)</p>

<p>Retrieves script details.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_script</span>(:<span class="ruby-identifier">script_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'script_name'</span>)
</pre>
          
          

          
          <div class="method-source-code" id="get_script-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1388</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_script</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:script_name</span>]
    <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:script_name</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :dev_id or :serial_number'</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_script</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_script_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_script_log" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_script_log</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_script_log">#get_script_log</a> Returns
Hash</p>

<p>Retrieves script log</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_script_log</span>({:<span class="ruby-identifier">script_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'script_name'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device_id'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get</span> <span class="ruby-identifier">script_log</span>({:<span class="ruby-identifier">script_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'script_name, :serial_number =&gt; '</span><span class="ruby-identifier">serial_number</span>})
</pre>
          
          

          
          <div class="method-source-code" id="get_script_log-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1414</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_script_log</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:script_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:script_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:script_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:script_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method: (:script_name &amp; :dev_id ) or (:script_name &amp; :serial_number)'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_script_log</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_script_log_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_script_log_summary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_script_log_summary</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-get_script_log_summary">#get_script_log_summary</a>
Returns Hash</p>

<p>Retrieves summary of executed scripts for a specific device</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_script_log_summary</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device_id'</span>) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get</span> <span class="ruby-identifier">script_log_summary</span>(:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial_number)
</span></pre>

<p><code>Optional_Arguments:</code></p>

<pre>:max_logs  # defaults to 1000</pre>
          
          

          
          <div class="method-source-code" id="get_script_log_summary-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1445</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_script_log_summary</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_logs</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_logs</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_logs</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'1000'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :script_name OR :serial_number (not both)'</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :script_name or :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_script_log_summary</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_script_log_summary_response</span>,<span class="ruby-value">:return</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_system_status" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_system_status</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_system_status">#get_system_status</a>
Returns Hash</p>

<p>Retrieves system status as has containing system variables and values.</p>

<p><code>Usage:</code></p>

<pre>get_system_status()</pre>
          
          

          
          <div class="method-source-code" id="get_system_status-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1474</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_system_status</span>
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query_for_get_sys_status</span>(<span class="ruby-value">:get_system_status</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_system_status_response</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_task_detail" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_task_detail</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-get_task_detail">#get_task_detail</a> Returns
Hash</p>

<p>Retrieves details of a task</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">get_task_detail</span>(:<span class="ruby-identifier">task_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'task-id'</span>) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">get_task_detail</span>({:<span class="ruby-identifier">task_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'task-id'</span>, <span class="ruby-identifier">adom</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>})   <span class="ruby-comment">#if ADOM is not provided it defaults to root ADOM</span>
</pre>
          
          

          
          <div class="method-source-code" id="get_task_detail-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1494</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_task_detail</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:task_id</span>] <span class="ruby-keyword">then</span>
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:task_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:task_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :task_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:get_task_list</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:get_task_list_response</span>,<span class="ruby-value">:task_list</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-import_policy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">import_policy</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-import_policy">#import_policy</a> Returns
Nori::StringWithAttributes (returned string contains details of import if
success)</p>

<p>Imports a policy from managed device to FMG current config DB for that
device.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">import_policy</span>({:<span class="ruby-identifier">adom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>, :<span class="ruby-identifier">dev_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'MSSP-1'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">import_policy</span>({:<span class="ruby-identifier">adom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'3'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'3'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">import_policy</span>({:<span class="ruby-identifier">adom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>, :<span class="ruby-identifier">vdom_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="import_policy-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1521</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">import_policy</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_oid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_oid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_oid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_oid</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom_oid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:vdom_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:vdom_name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; (:adom_id OR :adom_name) AND (:dev_id OR :dev_name) AND (:vdom_id OR :vdom_name)'</span>)
    <span class="ruby-keyword">end</span>
   
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:import_policy</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:import_policy_response</span>,<span class="ruby-value">:report</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-install_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">install_config</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>install_conifg Returns Nori::StringWithAttributes (string contains taskID
of associated task)</p>

<p>Installs a policy package to specified device.</p>

<pre>Note that there is no argument validation in this method as there is in most other methods of this class.</pre>

<p>Required arguments:</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">install_config</span>({:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'root'</span>, :<span class="ruby-identifier">pkgoid</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'572'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'234'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:rev_name    # revision name of package revision to install.  If not specified installs most recent rev
:install_validate   # 0 or 1 for false or true.  If not specified defaults to no-validation.</pre>
          
          

          
          <div class="method-source-code" id="install_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1580</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">install_config</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:new_rev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>]
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:install_validate</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:validate</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:validate</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:pkgoid</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:pkgoid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:oid</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:pkgoid</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:pkgoid</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:oid</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :adom AND :pkgoid AND (:dev_id OR :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:install_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:install_config_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-list_faz_generated_reports" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">list_faz_generated_reports</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a
href="FmgApi.html#method-i-list_faz_generated_reports">#list_faz_generated_reports</a>
Returns Hash or Array of Hashes (if multiple results are found then returns
Array of Hashes)</p>

<p>Retrieves a list of FAZ generated reports stored on FortiAnalyzer or
FortiManager.   An ADOM &amp; start/end dates can be optionally specified
as a arguments.  If an ADOM is not specified as a parameter this method
will default to retrieving a report list from the root ADOM. If start time
is provided you must also pass end time and vice-versa.  Various time
formats are supported including with/without dashes and with/without time.
If date/time arguments are provided but format is not valid then will still
run with out date/time filtering.</p>

<p><code>Usage:</code></p>

<pre>list_faz_generated_reports()</pre>

<p><code>Optional_Arguments:</code></p>

<pre class="ruby">:<span class="ruby-identifier">adom</span>        <span class="ruby-comment"># containing adom-name</span>
:<span class="ruby-identifier">start_time</span>  <span class="ruby-comment"># =&gt; '2014-01-01T00:00:00'    earliest report time</span>
:<span class="ruby-identifier">end_time</span>    <span class="ruby-comment"># =&gt; '2014-04-01T00:00:00'    latest report time</span>
</pre>
          
          

          
          <div class="method-source-code" id="list_faz_generated_reports-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">list_faz_generated_reports</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:start_date</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:end_date</span>]
      <span class="ruby-identifier">startdate</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:start_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">enddate</span> = <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">opts</span>[<span class="ruby-value">:end_date</span>]).<span class="ruby-identifier">strftime</span>(<span class="ruby-string">'%Y-%m-%dT%H:%M:%S'</span>) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">startdate</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">enddate</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">enddate</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">startdate</span>
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:start_date</span>] = <span class="ruby-identifier">startdate</span>
          <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:end_date</span>] = <span class="ruby-identifier">enddate</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-identifier">__method__</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">': End_date provided comes before the start_date provided, executing without date filter.'</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">puts</span> <span class="ruby-identifier">__method__</span>.<span class="ruby-identifier">to_s</span>  <span class="ruby-operator">+</span> <span class="ruby-string">': Invalid date formats provided, executing without date filter.'</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:list_faz_generated_reports</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:list_faz_generated_reports_response</span>,<span class="ruby-value">:report_list</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-list_revision_id" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">list_revision_id</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-list_revision_id">#list_revision_id</a>
Returns: Nori::StringWithAttributes (string contains revisionID requested)</p>

<p>Retrieves revision IDs associated with a particular device and optionally
revisions with specific name</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">list_revision_id</span>(:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial_number'</span>) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">list_revision_id</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'device_id'</span>)
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>rev_name   # Name of revision to get ID for, if not specified retrieves current revision</pre>
          
          

          
          <div class="method-source-code" id="list_revision_id-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1661</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">list_revision_id</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :dev_id OR :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:list_revision_id</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:list_revision_id_response</span>,<span class="ruby-value">:rev_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_faz_archive" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_faz_archive</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-remove_faz_archive">#remove_faz_archive</a>
Returns: Hash  (returned result contains error_code and</p>

<pre>error_message hash keys.  :error_code=0 (successful), :error_code=1 (failed))</pre>

<p>Removes specified archive file.  (Filename is required and can be retrieved
from associated FAZ log incident serial number)</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">remove_faz_archive</span>({:<span class="ruby-identifier">adom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'adom_name'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'serial_number'</span>, :<span class="ruby-identifier">file_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'filename'</span>, :<span class="ruby-identifier">type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'type'</span>})
</pre>

<p><strong>Note</strong> that in most cases dev_id means dev_id but for this
query you must supply the serial number as the dev_id.</p>

<p>Types are as follows:   1-Web, 2-Email, 3-FTP, 4-IM, 5-Quarantine, 6-IPS</p>

<p>Filename must be known and can be found in the associated log file</p>

<p>Also note, that although the WSDL claims that this query supports tar and
gzip compression options I have not been able to get either of those to
work.  if you specify tar the file is sent without compression (same as if
you didnâ€™t specify) if you specify gzip it also requires to specify a
password but if you do the query will always hang.</p>
          
          

          
          <div class="method-source-code" id="remove_faz_archive-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1702</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_faz_archive</span> (<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:file_name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:file_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:file_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :adom, :dev_id, :file_name, :type'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:remove_faz_archive</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:remove_faz_archive_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-retrieve_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">retrieve_config</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-retrieve_config">#retrieve_config</a>
Returns: Nori::StringWithAttributes (Returned string contains the
FortiManager task ID of the request.  Status of the request can be found by
retrieving and analyzing the task by ID.)</p>

<p>Retrieves configuration from managed device to FortiManager DB</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">retrieve_config</span>(:<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'XXXXXXXXXXXXX'</span>) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">retrieve_config</span>(:<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'XXX'</span>)
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:rev_name   # Name to give to revision when saved to DB.  If not specified will be default naming.</pre>
          
          

          
          <div class="method-source-code" id="retrieve_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1735</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">retrieve_config</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:new_rev_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_name</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :dev_id OR :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:retrieve_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:retrieve_config_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-revert_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">revert_config</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>revert config Returns Hash  (Returned result contains error_code and
error_message hash keys. :error_code=0 (successful), :error_code=1
(failed))</p>

<p>Reapplies a previous revision of configuration history to the active config
set for the specified device</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">revert_config</span>({<span class="ruby-identifier">rev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'rev#'</span>, :<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'XXXXXXXXXXXXX'</span>}) <span class="ruby-constant">OR</span>
<span class="ruby-identifier">revert_config</span>({<span class="ruby-identifier">rev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'rev#'</span>, :<span class="ruby-identifier">dev_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'XXX'</span>})
</pre>
          
          

          
          <div class="method-source-code" id="revert_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1764</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">revert_config</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:dev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dev_id</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:rev_id</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:rev_id</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :dev_id OR :serial_number in AND :rev_id'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:revert_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:revert_config_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run_faz_report" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_faz_report</span><span
            class="method-args">(opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-run_faz_report">#run_faz_report</a> Returns
Hash   (Returned result contains error_code and error_message hash keys.</p>

<pre>:error_code=0 (successful), :error_code=1 (failed))

 ************** Still need to identify filter options and test those *********</pre>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">run_faz_report</span>(:<span class="ruby-identifier">report_template</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'report_name'</span>)
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:filter  # Filter to apply to report when run
:adom    # Name of ADOM to run report from/within</pre>
          
          

          
          <div class="method-source-code" id="run_faz_report-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_faz_report</span>(<span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:filter</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:filter</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:filter</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:report_template</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:report_template</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:report_template</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :adom AND :report_template'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:run_faz_report</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:run_faz_report_response</span>,<span class="ruby-value">:error_msg</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run_script" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_script</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-run_script">#run_script</a> Returns:
Nori::StringWithAttributes  (returned value is task ID for script process)</p>

<p>Executes script by name on FMG DB or FMG managed devices</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">run_script</span>({:<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name-of-script'</span>, :<span class="ruby-identifier">serial_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'XXXXXXXXXXXXX'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre>:is_global  # (values: true or false) [default = false],
:run_on_db  # (values: true or false) [default = false],
:type       # (values CLI or TCL) [default = CLI]</pre>
          
          

          
          <div class="method-source-code" id="run_script-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1828</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_script</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:is_global</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:is_global</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'false'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:run_on_dB</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:run_on_db</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:run_on_db</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'false'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'CLI'</span>


  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:serial_number</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:serial_number</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name AND :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:run_script</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:run_script_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-search_faz_log" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">search_faz_log</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-search_faz_log">#search_faz_log</a> Returns
Hash (for single log) or Array of Hashes (for multiple logs)</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">search_faz_log</span>({:<span class="ruby-identifier">device_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'name-of-device'</span>, :<span class="ruby-identifier">search_criteria</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'srcp=x.x.x.x and XXXXX or .... etc'</span>})
</pre>

<p><code>Optional_Arguments:</code></p>

<pre class="ruby">:<span class="ruby-identifier">adom</span>              <span class="ruby-comment"># (values 'adom-names') [default =&gt; root]</span>
:<span class="ruby-identifier">check_archive</span>     <span class="ruby-comment"># (values: 0, 1?) [default = 0]</span>
:<span class="ruby-identifier">compression</span>       <span class="ruby-comment"># (values: tar, gzip) [default = tar]</span>
:<span class="ruby-identifier">content</span>           <span class="ruby-comment"># (values:  logs, XXX, XXX) [default = logs]</span>
:<span class="ruby-identifier">dlp_archive_type</span>  <span class="ruby-comment"># (values:  XXXX) [default: &lt;not set&gt;]</span>
:<span class="ruby-identifier">format</span>            <span class="ruby-comment"># (values: rawFormat, XXXX) [default = rawFormat]</span>
:<span class="ruby-identifier">log_type</span>          <span class="ruby-comment"># (values: traffic, event, antivirus, webfilter, intrusion, emailfilter, vulnerability, dlp, voip) [default = traffic],</span>
:<span class="ruby-identifier">max_num_matches</span>   <span class="ruby-comment"># (values: 1-n) [default = 10],</span>
:<span class="ruby-identifier">start_index</span>       <span class="ruby-comment"># (values: 1-n) [default = 1],</span>
</pre>
          
          

          
          <div class="method-source-code" id="search_faz_log-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1867</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">search_faz_log</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:check_archive</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:check_archive</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:check_archive</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'0'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:compression</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:compression</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:check_compression</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'tar'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:content</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:content</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:content</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'logs'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:format</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:formate</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:format</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'rawFormat'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:log_type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:log_type</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:log_type</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'traffic'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:max_num_matches</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_num_matches</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_num_matches</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:max_num_matches</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'10'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:search_criteria</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:search_criteria</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:search_criteria</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'srcip=10.0.2.15'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:start_index</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:start_index</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:start_index</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:start_index</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'1'</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:DLP_archive_type</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dlp_archive_type</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:dlp_archive_type</span>]

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_name</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:device_name</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:device_name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required arguments for method-&gt; :name AND :serial_number'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:search_faz_log</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:search_faz_log_response</span>,<span class="ruby-value">:logs</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">result</span>[<span class="ruby-value">:data</span>]
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_faz_config" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_faz_config</span><span
            class="method-args">(opts={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="FmgApi.html#method-i-set_faz_config">#set_faz_config</a> Returns
NoriStringWithAttributes  (returns string containing task ID)</p>

<p>Sets configuration of FMG/FAZ itself with the config string containing CLI
formatted config commands.</p>

<p><code>Usage:</code></p>

<pre class="ruby"><span class="ruby-identifier">search_faz_log</span>({:<span class="ruby-identifier">config</span> =<span class="ruby-operator">&gt;</span>  <span class="ruby-string">&quot;configuration \n configuration \n ...&quot;</span>})
</pre>
          
          

          
          <div class="method-source-code" id="set_faz_config-source">
            <pre><span class="ruby-comment"># File fmgapi.rb, line 1902</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_faz_config</span>(<span class="ruby-identifier">opts</span>={})
  <span class="ruby-identifier">querymsg</span> = <span class="ruby-ivar">@authmsg</span>
  <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:adom</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:adom</span>] <span class="ruby-operator">:</span> <span class="ruby-string">'root'</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:config</span>]
      <span class="ruby-identifier">querymsg</span>[<span class="ruby-value">:config</span>] = <span class="ruby-identifier">opts</span>[<span class="ruby-value">:config</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">'Must provide required argument for method-&gt; :config'</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">exec_soap_query</span>(<span class="ruby-value">:set_faz_config</span>,<span class="ruby-identifier">querymsg</span>,<span class="ruby-value">:set_faz_config_response</span>,<span class="ruby-value">:task_id</span>)
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">fmg_rescue</span>(<span class="ruby-identifier">e</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="FmgApi.html#method-i-set_fmg_config">set_fmg_config</a>
        </div>
        

        
      </div>

    
      <div id="method-i-set_fmg_config" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">set_fmg_config</span><span
            class="method-args">(opts={})</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="FmgApi.html#method-i-set_faz_config">set_faz_config</a>
        </div>
        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

